import { useRouter } from 'next/router';
import { useDispatch } from 'react-redux';

import { userActions } from '@/state/user/userReducer';

import { ROLES } from '../constants/roles';


export function InitUserStateProvider({ initialState }) {
  const router = useRouter();
  const dispatch = useDispatch();

  const { CLIENT, FREELANCER } = ROLES;

  const role = initialState?.role;

  if (role) {
    dispatch(userActions.serUser(initialState));

    if (role === CLIENT) router.push('push to client marketplace');
    if (role === FREELANCER) router.push('push to client marketplace');
  }

  return <>{children}</>;
}
